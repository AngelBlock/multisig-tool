<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Multisig Tool</title>
    
    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="/style.css">
    
    <!-- import the webpage's javascript file -->
    <script src="/script.js" defer></script>
  </head>  
  <body>
    <h1>Tool to manage multisigs</h1>
    <p>This is temporary until NEAR Wallet adds this functionality</p>

    <script id="template-keys" type="x-tmpl-mustache">
      <ul>
        {{#keys}}
            <li>{{ publicKey }} {{ path }}</li>
        {{/keys}}
      </ul>
      <input id="path" />
      <button onclick="addPath()">Add Ledger path</button>
    </script>

    <h2>Keys</h2>
    <div id="keys"></div>

    <script id="template1" type="x-tmpl-mustache">
      <ul>
        {{#accounts}}
            <li><a href="#{{ accountId }}">{{ accountId }}</a> {{ amount }}</li>
        {{/accounts}}
      </ul>
      <input id="account" />
      <button onclick="addAccount()">Add account</button>
    </script>

    <h2>Accounts</h2>
    <div id="accounts"></div>

    <script id="template2" type="x-tmpl-mustache">
        <h2>{{ accountId }}</h2>
        <p>Num confirmations: {{ numConfirmations }}</p>
        <p>Keys</p>
        <ul>
        {{#accessKeys}}
          <li>{{ public_key }}</li>
        {{/accessKeys}}
        </ul>
        <h3>Requests</h3>
        <table>
          {{#requests}}
            <tr>
              <td>{{ request_id }}</td>
              <td>{{ receiver_id }}</td>
              <td>{{ actions }}</td>
              <td><button onclick="confirmRequest('{{ accountId }}', {{ request_id }})">Confirm</button></td>
            </tr>
          {{/requests}}
        </table>
        <h3>Actions</h3>
        <p>Add new key:</p>
        <input id="new-key" /><button onclick="submitRequest('{{ accountId }}', 'add_key')">Add key</button>
        <p>Transfer:</p>
        <input id="transfer-receiver" placeholder="Receiver" /><input id="transfer-amount" placeholder="Amount"><button onclick="submitRequest('{{ accountId }}', 'transfer')">Transfer</button>
    </script>
    <div id="requests"></div>
  </body>
</html>
